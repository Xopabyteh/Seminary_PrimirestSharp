@page "/photo"
@layout SingleFullFlexLayout

<GoBackButton Text='Přidat Fotku' @ref="goBackButton"/>
@if (optionsLoaded)
{
    @if (canTakePhotoToday)
    {
        <div class='container'>
            <div class='photo-holder'>
                @if (processedPhotoStream is not null)
                {
                    <img class='photo' src=@capturedPhotoDisplayData />
                    <div class='photo__overlay bg-white' @onclick="CapturePhoto">
                        <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.63636 16C1.18636 16 0.801001 15.8432 0.480274 15.5296C0.159547 15.216 -0.000544065 14.8395 1.3891e-06 14.4V4.8C1.3891e-06 4.36 0.160365 3.9832 0.481092 3.6696C0.80182 3.356 1.18691 3.19947 1.63636 3.2H4.21364L5.72727 1.6H10.6364V3.2H6.44318L4.95 4.8H1.63636V14.4H14.7273V7.2H16.3636V14.4C16.3636 14.84 16.2033 15.2168 15.8825 15.5304C15.5618 15.844 15.1767 16.0005 14.7273 16H1.63636ZM14.7273 4.8V3.2H13.0909V1.6H14.7273V0H16.3636V1.6H18V3.2H16.3636V4.8H14.7273ZM8.18182 13.2C9.20455 13.2 10.074 12.8499 10.7902 12.1496C11.5064 11.4493 11.8642 10.5995 11.8636 9.6C11.8636 8.6 11.5055 7.74987 10.7894 7.0496C10.0732 6.34933 9.204 5.99947 8.18182 6C7.15909 6 6.28964 6.35013 5.57346 7.0504C4.85727 7.75067 4.49946 8.60053 4.5 9.6C4.5 10.6 4.85809 11.4501 5.57427 12.1504C6.29046 12.8507 7.15964 13.2005 8.18182 13.2ZM8.18182 11.6C7.60909 11.6 7.125 11.4067 6.72955 11.02C6.33409 10.6333 6.13636 10.16 6.13636 9.6C6.13636 9.04 6.33409 8.56667 6.72955 8.18C7.125 7.79333 7.60909 7.6 8.18182 7.6C8.75455 7.6 9.23864 7.79333 9.63409 8.18C10.0295 8.56667 10.2273 9.04 10.2273 9.6C10.2273 10.16 10.0295 10.6333 9.63409 11.02C9.23864 11.4067 8.75455 11.6 8.18182 11.6Z" fill="#636363" />
                        </svg>
                    </div>
                }
                else //No photo
                {
                    <div class='photo__placeholder' @onclick="CapturePhoto">
                        <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.63636 16C1.18636 16 0.801001 15.8432 0.480274 15.5296C0.159547 15.216 -0.000544065 14.8395 1.3891e-06 14.4V4.8C1.3891e-06 4.36 0.160365 3.9832 0.481092 3.6696C0.80182 3.356 1.18691 3.19947 1.63636 3.2H4.21364L5.72727 1.6H10.6364V3.2H6.44318L4.95 4.8H1.63636V14.4H14.7273V7.2H16.3636V14.4C16.3636 14.84 16.2033 15.2168 15.8825 15.5304C15.5618 15.844 15.1767 16.0005 14.7273 16H1.63636ZM14.7273 4.8V3.2H13.0909V1.6H14.7273V0H16.3636V1.6H18V3.2H16.3636V4.8H14.7273ZM8.18182 13.2C9.20455 13.2 10.074 12.8499 10.7902 12.1496C11.5064 11.4493 11.8642 10.5995 11.8636 9.6C11.8636 8.6 11.5055 7.74987 10.7894 7.0496C10.0732 6.34933 9.204 5.99947 8.18182 6C7.15909 6 6.28964 6.35013 5.57346 7.0504C4.85727 7.75067 4.49946 8.60053 4.5 9.6C4.5 10.6 4.85809 11.4501 5.57427 12.1504C6.29046 12.8507 7.15964 13.2005 8.18182 13.2ZM8.18182 11.6C7.60909 11.6 7.125 11.4067 6.72955 11.02C6.33409 10.6333 6.13636 10.16 6.13636 9.6C6.13636 9.04 6.33409 8.56667 6.72955 8.18C7.125 7.79333 7.60909 7.6 8.18182 7.6C8.75455 7.6 9.23864 7.79333 9.63409 8.18C10.0295 8.56667 10.2273 9.04 10.2273 9.6C10.2273 10.16 10.0295 10.6333 9.63409 11.02C9.23864 11.4067 8.75455 11.6 8.18182 11.6Z" fill="#636363" />
                        </svg>
                    </div>
                }
            </div>
            <div class='card-holder mv-300'>
                @if (todayMenu is not null)
                {
                    <InputRadioGroup @bind-Value='selectedFoodId'>
                        @foreach (var food in todayMenu!.Foods)
                        {
                            <div class='card bg-accent' @onclick="() => SelectFoodId(food.FoodId)">
                                <InputRadio Value='food.FoodId' />
                                <p>@food.Name</p>
                            </div>
                        }
                    </InputRadioGroup>
                }
            </div>
            <button class='button bg-success' @onclick="TryPublishPhoto">Poslat</button>
        </div>
        <div class='success-overlay' data-active='@(showSuccessModal)' data-fade='@(fadeModalAway)'>
            <div class='success-modal' data-active='@(showSuccessModal)' data-fade='@(fadeModalAway)'>
                <img width='128' height='128' src='svg/heart-love-fork.svg' />
                <h1 class='fs-large fw-bold color-black'>DÍKY</h1>
                <p class='fs-regular color-secondary fw-regular'>za tvůj příspěvek, jsi úžasný a  přispíváš tiím všem</p>
                <button class='mt-400 button bg-success' @onclick="GoBack">Zpět</button>
                <a class='mt-200 color-primary fs-regular' @onclick="OnAddAnotherPhotoClicked">Přidat další fotku</a>
            </div>
        </div>
    }
    else //Nothing to take photo of today
    {
        <div class='container'>
            <h2 class='fw-bold fs-large color-black'>Dnes není co fotit</h2>
            <p class='fw-bold fs-regular color-secondary'>Tak co tu děláš :-)</p>
            <svg width="154" height="154" viewBox="0 0 154 154" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M72.8371 56.4326C86.5121 38.4248 129.015 79.3461 118.608 87.3875C104.357 98.3976 44.7652 93.4016 72.8371 56.4326Z" fill="#1C80AA" />
                <path d="M60.3112 112.776L59.5818 132.899L47.8979 136.112H57.8779L60.7985 141.417L61.5294 136.112L67.6142 137.036L61.773 133.142L62.9896 115.861L60.3112 112.776ZM78.8589 115.986L80.435 136.06L69.1963 140.588L79.11 139.447L82.6186 144.382L82.7374 139.029L88.8869 139.251L82.6397 136.051L81.8712 118.744L78.8589 115.986Z" fill="#3B5174" />
                <path d="M33.7974 39.8189L30.188 47.367C29.9379 47.8889 29.5536 48.3349 29.0743 48.6593C28.5951 48.9837 28.0382 49.1748 27.4608 49.2131C26.8833 49.2513 26.3061 49.1354 25.7882 48.877C25.2704 48.6187 24.8305 48.2273 24.5138 47.743L19.7659 40.4837C19.449 39.9994 19.2666 39.4395 19.2373 38.8614C19.2081 38.2834 19.3331 37.7079 19.5996 37.1941C19.8661 36.6803 20.2644 36.2466 20.7537 35.9375C21.243 35.6284 21.8058 35.455 22.3842 35.435L30.7475 35.1463C31.3079 35.1279 31.8637 35.2542 32.3612 35.5131C32.8586 35.7719 33.281 36.1546 33.5875 36.6242C33.894 37.0938 34.0744 37.6345 34.1111 38.1941C34.1479 38.7537 34.0398 39.3133 33.7974 39.8189Z" fill="#DE7B56" />
                <path d="M135.431 96.0635C132.679 109.134 102.066 127.364 63.5445 121.861C22.6277 116.017 3.91008 42.3921 47.373 15.5744C71.6235 0.612035 96.5071 16.3263 101.032 35.1808C107.228 60.9788 87.7002 80.3958 112.728 91.5878C125.799 97.4395 137.457 86.4249 135.431 96.0635Z" fill="#FDD2BE" />
                <path d="M50.1418 39.8205C50.1418 40.4614 50.2681 41.096 50.5133 41.688C50.7586 42.2801 51.1181 42.8181 51.5712 43.2713C52.0244 43.7245 52.5624 44.0839 53.1545 44.3292C53.7465 44.5744 54.3811 44.7007 55.022 44.7007C55.6629 44.7007 56.2975 44.5744 56.8896 44.3292C57.4817 44.0839 58.0197 43.7245 58.4728 43.2713C58.926 42.8181 59.2855 42.2801 59.5307 41.688C59.776 41.096 59.9022 40.4614 59.9022 39.8205C59.9022 38.5262 59.388 37.2849 58.4728 36.3697C57.5576 35.4545 56.3163 34.9403 55.022 34.9403C53.7277 34.9403 52.4864 35.4545 51.5712 36.3697C50.656 37.2849 50.1418 38.5262 50.1418 39.8205Z" fill="black" />
                <path d="M77.036 55.043C97.7117 45.8902 115.136 102.266 102.139 104.267C84.3405 107.012 34.5897 73.8298 77.036 55.043ZM33.5821 79.7071C32.1775 79.316 30.9954 77.7821 29.9818 75.0449C29.5018 73.7208 29.1178 72.3637 28.8328 70.9844C28.7771 70.6992 28.8371 70.4036 28.9994 70.1626C29.1617 69.9216 29.4131 69.7549 29.6983 69.6993C29.9835 69.6437 30.2791 69.7036 30.5201 69.8659C30.7611 70.0282 30.9277 70.2796 30.9834 70.5648C31.7037 74.2494 33.2392 77.5489 34.2784 77.6226C34.4469 77.6347 35.9974 77.5474 38.3736 70.7784C38.4697 70.5043 38.6707 70.2797 38.9325 70.1539C39.0621 70.0917 39.2026 70.0555 39.3462 70.0476C39.4898 70.0396 39.6335 70.06 39.7692 70.1076C39.9049 70.1552 40.0298 70.2291 40.137 70.325C40.2441 70.4209 40.3313 70.5369 40.3936 70.6665C40.4559 70.7961 40.492 70.9367 40.5 71.0803C40.5079 71.2238 40.4875 71.3676 40.4399 71.5032C38.3931 77.3339 36.3794 79.9717 34.1235 79.8078C33.9401 79.7925 33.7587 79.7588 33.5821 79.7071ZM51.253 88.7846C49.8047 88.9561 48.1294 87.9846 46.1518 85.8325C45.2047 84.7881 44.3342 83.6769 43.547 82.5073C43.468 82.3872 43.4134 82.2526 43.3864 82.1113C43.3595 81.9701 43.3605 81.8249 43.3897 81.684C43.4188 81.5432 43.4754 81.4095 43.5561 81.2905C43.6369 81.1715 43.7404 81.0696 43.8606 80.9906C43.9807 80.9116 44.1153 80.8571 44.2566 80.8301C44.3978 80.8031 44.543 80.8042 44.6838 80.8333C44.8247 80.8624 44.9584 80.919 45.0774 80.9998C45.1964 81.0806 45.2983 81.184 45.3773 81.3042C47.4421 84.4398 50.1191 86.9093 51.1026 86.5859C51.2635 86.5333 52.6637 85.864 52.2952 78.6994C52.2878 78.5558 52.3088 78.412 52.3569 78.2765C52.4051 78.1409 52.4794 78.0161 52.5758 77.9093C52.6722 77.8024 52.7886 77.7156 52.9185 77.6538C53.0484 77.592 53.1892 77.5564 53.3329 77.549C53.4766 77.5415 53.6203 77.5625 53.7559 77.6106C53.8915 77.6588 54.0162 77.7332 54.1231 77.8295C54.2299 77.9259 54.3167 78.0423 54.3785 78.1722C54.4404 78.3021 54.476 78.443 54.4834 78.5866C54.8007 84.7527 53.9435 87.9605 51.7839 88.6628C51.6114 88.721 51.4336 88.7618 51.253 88.7846ZM39.327 99.2142C37.9735 99.1857 36.5674 98.0788 35.0319 95.853C34.2998 94.774 33.6464 93.6436 33.0768 92.4707C32.9677 92.2287 32.9579 91.9534 33.0496 91.7043C33.1412 91.4551 33.327 91.2518 33.5669 91.1381C33.8069 91.0245 34.0819 91.0095 34.3327 91.0964C34.5836 91.1833 34.7904 91.3652 34.9086 91.6029C36.3974 94.7431 38.533 97.3494 39.4759 97.1794C39.6263 97.1524 40.9994 96.7177 41.5814 90.1111C41.593 89.9785 41.6307 89.8494 41.6922 89.7314C41.7537 89.6133 41.8379 89.5085 41.9399 89.423C42.0419 89.3374 42.1598 89.2728 42.2868 89.2329C42.4138 89.1929 42.5474 89.1783 42.68 89.1899C42.8126 89.2016 42.9416 89.2392 43.0597 89.3008C43.1778 89.3623 43.2826 89.4464 43.3681 89.5485C43.4536 89.6505 43.5182 89.7683 43.5582 89.8953C43.5982 90.0223 43.6128 90.1559 43.6011 90.2885C43.0988 95.9838 41.9002 98.8097 39.8308 99.1796C39.6645 99.2079 39.4957 99.2195 39.327 99.2142ZM58.544 108.626C57.1513 109.054 55.3286 108.399 52.996 106.638C51.8773 105.78 50.8218 104.843 49.8378 103.834C49.6372 103.624 49.5282 103.343 49.5349 103.053C49.5415 102.762 49.6632 102.487 49.8732 102.286C50.0832 102.085 50.3643 101.976 50.6546 101.983C50.945 101.99 51.2208 102.111 51.4215 102.321C54.0157 105.036 57.0912 106.983 58.001 106.489C58.1514 106.407 59.4072 105.498 57.7589 98.5179C57.7258 98.378 57.7206 98.2329 57.7436 98.091C57.7666 97.9491 57.8173 97.813 57.8929 97.6907C57.9684 97.5684 58.0673 97.4621 58.1839 97.378C58.3006 97.2939 58.4326 97.2336 58.5725 97.2005C58.7125 97.1674 58.8575 97.1622 58.9995 97.1852C59.1414 97.2082 59.2774 97.2589 59.3997 97.3345C59.5221 97.41 59.6283 97.5089 59.7124 97.6255C59.7965 97.7421 59.8569 97.8742 59.8899 98.0141C61.3096 104.03 61.0404 107.338 59.0432 108.415C58.8842 108.502 58.7169 108.572 58.544 108.626Z" fill="#22B0C3" />
            </svg>
        </div>
    }
}
else //Options not loaded
{
    <div class='container'>
        <h2 class='fw-semi-bold color-black fs-regular'>Načítání menu & objednávky</h2>
        <Loader DotColor='var(--clr-primary)'/>
    </div>
}
